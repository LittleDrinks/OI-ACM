---
tags:
  - 题解
  - 线性代数
aliases:
  - Determinant of 01-Matrix
---
## [NCC108301D. Determinant of 01-Matrix](https://ac.nowcoder.com/acm/contest/108301/D)

上三角矩阵的行列式为 $0$，我们考虑对如下的矩形进行初等变换，把它变成 01 矩阵。
$$\begin{pmatrix}1\\&1\\&&\ddots\\&&&&n\end{pmatrix}$$
$200$ 大概是 $O(\log n)$ 的数量级，考虑使用倍数抵消。在 $n$ 的上面两行加上 $-\displaystyle\left\lfloor\dfrac{n}{2}\right\rfloor$，在 $-\displaystyle\left\lfloor\dfrac{n}{2}\right\rfloor$ 的上面两行加上 $\displaystyle\left\lceil\dfrac{\left\lfloor\dfrac{n}{2}\right\rfloor}{2}\right\rceil$，以此类推，把矩阵写为
$$
\begin{pmatrix} 
1 \\
&1 \\
&&\ddots \\
&&&1 &&&& \left\lceil\frac{\left\lfloor n/2\right\rfloor}{2}\right\rceil \\
&&&&1 &&& \left\lceil\frac{\left\lfloor n/2\right\rfloor}{2}\right\rceil \\
&&&&&1 && -\left\lfloor\frac{n}{2}\right\rfloor\\
&&&&&&1 & -\left\lfloor\frac{n}{2}\right\rfloor\\
&&&&&&&n \\
\end{pmatrix}
$$
然后从底向上进行消法变换即可。

[***AC 代码***](https://ac.nowcoder.com/acm/contest/view-submission?submissionId=78919070)

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
    int n;
    cin >> n;
    vector<int> c{n, n};
    for (int x = c.back(); abs(x) > 0; x = c.back()) {
        int nxt = (x > 0 ? -x/2: (-x+1)/2);
        c.push_back(nxt);
        c.push_back(nxt);
    }
    reverse(c.begin(), c.end());
    int r = c.size();
    vector matrix(r, vector<int>(r));
    for (int i = 0; i < r; ++i) {
        matrix[i][i] = 1;
    }
    for (int i = 0; i < r; ++i) {
        matrix[i][r-1] = c[i];
    }
    for (int i = r-1; i - 3 >= 0; i -= 2) {
        for (int j = 0; j < r; ++j) {
            matrix[i][j] += matrix[i-2][j] + matrix[i-3][j];
            matrix[i-1][j] += matrix[i-2][j] + matrix[i-3][j];
        }
    }
    cout << r << "\n";
    for (auto row: matrix) {
        for (auto x: row) { cout << x << " "; }
        cout << "\n";
    }
}
```
