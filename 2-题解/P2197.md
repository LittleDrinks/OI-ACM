---
tags:
  - 题解
  - 博弈论
aliases:
  - Nim游戏
---
## [P2197 【模板】Nim 游戏](https://www.luogu.com.cn/problem/P2197)

> [!note] 结论：当石子数量异或和为零时为必败态。
> 所有堆都只剩零颗石头时为必败态。
> ①当先手石子数量异或和为零时，从石头堆中任意拿走若干石头，二进制位上的 $0,1$ 必然发生变化。而由于只对一堆石子进行操作，无论是从 $0$ 变 $1$ 还是 $1$ 变 $0$，异或和都不再为 $0$
> ②当先手石子数量异或和不为零时，记此时异或和为 $x$，选择最高位和 $x$ 相同的任意一堆石头 $y$，由于最高位相同，异或掉之后最高位变 $0$，一定有 $x\oplus y<y$。从 $y$ 中拿走 $x\oplus y$ 就满足要求了
> 综上，先手异或和为零一定先达到只剩 $0$ 颗石头的状态，因而必败

[***AC 代码***](https://www.luogu.com.cn/record/227921843)

```python
from functools import reduce
from operator import xor

t = int(input())
while t:
    t -= 1
    n = int(input())
    a = map(int,input().split())
    if (reduce(xor, a) == 0):
        print("No")
    else:
        print("Yes")
```
