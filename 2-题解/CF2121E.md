---
tags:
  - 题解
  - 分类讨论
aliases:
  - Sponsor of Your Problems
---
## [CF2121E. Sponsor of Your Problems](https://codeforces.com/problemset/problem/2121/E)

首先计算 $l$ 和 $r$ 的最长公共前缀长度 $L$，$x$ 的前 $L$ 位必须与 $l$、$r$ 相同，如 $l={\color{red}123}45$，$r={\color{red}123}89$，$x$ 的前三位必须等于 $123$，此时答案基础值为 $2L$。
若公共前缀后第一位数字差值 $\geq 2$，则 $x$ 可在该位取中间值使后续无额外相同位，答案为 $2L$。比如 $l={\color{red}123}{\color{orange}4}5$，$r={\color{red}123}{\color{orange}6}9$，因为 $6-4=2$，选择 $x={\color{red}123}{\color{orange}4}x$ 即可。
若该位差值为 $1$，则 $x$ 必须紧贴 $l$ 或 $r$，比如 $l=123{\color{orange}4}$，$r=123{\color{orange}5}$，$x$ 必须等于 $1234$ 或 $1235$ 中的一个。
紧贴 $l$：需统计 $l$ 后续连续 $9$ 的个数 $lc$（选择 $l$ 时 $x$ 后续必须全取 $9$）
紧贴 $r$：需统计 $r$ 后续连续 $0$ 的个数 $rc$（选择 $r$ 时 $x$ 后续必须全取 $0$）
比如 $l=1{\color{grey}99999}1$，$r=2{\color{grey}00000}1$
答案取两种情况最小值：$2L + 1 + \min(lc, rc)$（其中 $+1$ 来自紧贴位的贡献）。

[***AC 代码***](https://codeforces.com/contest/2121/submission/331967486)

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;
using db = long double;
using i128 = __int128;

void solve()
{
    string l, r;
    cin >> l >> r;
    reverse(l.begin(), l.end());
    reverse(r.begin(), r.end());
    int ans = 0;
    while (!l.empty() && l.back() == r.back()) {
        ans += 2;
        l.pop_back();
        r.pop_back();
    }
    if (!l.empty()) {
        int lx = l.back() - '0';
        int rx = r.back() - '0';
        assert(lx != rx);
        if (rx - lx == 1) {
            l.pop_back();
            r.pop_back();
            int lc=0; while (!l.empty() && l.back()=='9') { ++lc; l.pop_back(); } 
            int rc=0; while (!r.empty() && r.back()=='0') { ++rc; r.pop_back(); } 
            ans += 1 + min(lc, rc);
        }
    }

    cout << ans << "\n";
}

int main()
{
	ios::sync_with_stdio(0); cin.tie(0); cout.tie(0); 
	int t = 1;
	cin >> t;
	while (t--) { solve(); }
}
```
